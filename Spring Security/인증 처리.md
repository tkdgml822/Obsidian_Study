가장 많이 사용하는 아이디와 패스워드 기반 폼 로그인을 시도하면 스프링 시큐리티에서 어떤 절차로 인증처리하는지 그림으로 알아보자
![인증처리 절차](https://github.com/tkdgml822/Obsidian_Study/blob/main/Spring%20Security/image/%EC%9D%B8%EC%A6%9D%EC%B2%98%EB%A6%AC%EA%B3%BC%EC%A0%95.png?raw=true)

1. 사용자가 폼에 아이디/패스워드를 입력, HTTPServletRequest에 아이디와 비밀번호 정보가 전달
   이때 AuthenticationFilter가 넘어논 아이디와 비밀번호의 유효성 검사를 한다.
2. 유효성 검사가 끝나면 실제 구현체인 UsernamePasswordAuthenticationToken을 만들어 넘겨준다.
3. 전달받은 인증용 객체인 UsernamePasswordAuthenticationToken을 AuthenticationManger에게 보내준다.
4. UsernamePasswordAuthenticationToken을 AuthenticationProvider에 보낸다.
5. 사용자 아이디를 UserDetailService에 보낸다. UserDetailService는 사용자 아이디로 찾은 사용자의 정보를 UserDetails 객체로 만들어 AuthenticationProvider에 전달한다.
6. DB에 있는 사용자 정보를 가져옵니다.
7. 입력 정보와 UserDetails의 정보를 비교해 실제 인증 처리를 합니다.
8. 8 ~ 10까지 인증이 완료되면 SecurityContextHolder에 Authentication을 저장합니다. 인증 성공 여부에 따라 성공하면 AuthenticationSuccessHandler, 실해하면 AuthenticationFailureHandler 핸들러를 실행합니다.