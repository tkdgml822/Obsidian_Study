
# Transaction(트랜잭션)
	데이터베이스의 상태를 변화시키기 위해 수행하는 작업 단위

## 성질
### Atomicity (원자성)
1. 트랜잭션의 연산은 데이터베이스에 모두 반영되든지 아니면 전혀 반영되지 않아야 한다.
2. 트랜잭션 내의 모든 명령은 반드시 완변히 수행되어야 한다 모두가 완벽히 수행되지 않고 하나라도 오류가 발생하면 트랜잭션 전부가 취소되어야 한다.

### Consistency (일관성)
1. 트랜잭션이 실행이 성공적이면 일관성 있는 데이터베이스 상태로 변환한다.
2. 시스템이 가지고 있는 고정요소는 트랜잭션 수행 전과 트랜잭션 수행 환료 후의 상태가 같아야 한다.

### Isolation (독립성, 격리성)
1. 둘 이상의 트랜잭션이 동시에 병해 실행시 어느 하나의 트랜잭션 실행중에 다른 트랜잭션의 연산이 끼어들 수 없다.
2. 수행중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 있다.

### Durablility (영속석, 지속성)
1. 성공적으로 완료된 트랙잭션의 결과는 시스템이 고장나더라도 영구적으로 반영되어야 한다. 


# 트랜잭션 연산 및 상태

### commit
하나의 트랜잭션이 성공적으로 끝났고, DB가 일관성있는 상태일 때 이를 알려주기 위해 사용된다.

### Rollback
하나의 트랜잭션 처리가 비정상적으로 종료되어 트랜잭션의 원장이성이 깨지면 ROLLBACK 연산을 실행하여 트랜잭션 수행이 실패했음을 선언하고, DB 트랜잭션 수행 전과 일관된 상태로 되돌려야 한다.

## 예시
트랜잭션은 '어떤 변경 사항이 모두 실행되거나 모두 실행되지 않은 상태로 만드는 것'을 의미. 완전히 실행되거나 전혀 실행이 전혀 실행되지 않도록 만드는 것이다. (원자성)

예를 들어 은행 시스템이 있다고 해보자. 우리는 A계좌에서 B계좌에 돈을 이체한다.
- A 계좌의 잔액에서 일정 금액을 뺀다.
- B 계좌의 잔액에서 일정 금앰을 더한다.
두 가지 연산이 '모두' 성공하거나 중간에 실패하면 A와 B 계좌의 잔액이 변경되서는 안된다. (원자성)
만약 원자성이 이루어지지 않는다고 해보자. 한마디로 하나의 연산만 된다고 해보자.  
첫번째 연산이 성공했는데 A계좌에서 돈이 빠져 나갔는데 두번째 연산이 실패하면 A계좌에서 돈만 빠져나가고 B는 아무것도 되지 않는다. 이러면 이 은행 서비스는 대참사다.
잘 짜여진 서비스를 만들려면 첫번째 연산이 성공한 후 두번째 연산이 실행이 실패하면 첫 번째 연산까지 실행되지 않은 것으로 판단해야한다.
그리고 첫번째 상태로 되될리는 일을 '롤백(Rollback)'이라고 한다.

## 무결성
트랜잭션과 무결성은 자주 등장한다. 앞서 예시에서 트랜잭션이 없다고 하면 아까 말한 대참사가(A계좌에서 B계좌로 송금했는데 A 계좌의 잔액만 금액이 빠진 상황) 일어난다고 해보자. 그러면 우리는 것을 '데이터 무결성이 깨졌다.'라고 표현한다.
