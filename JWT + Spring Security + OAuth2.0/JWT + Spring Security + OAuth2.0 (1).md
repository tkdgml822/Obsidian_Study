# ğŸ¦€ ê°œìš”
`JWT + Spring Security + OAuth2.0`ì— ê´€í•œ ì±…ì„ ì½ê³  ë‚˜ì„œ `OAuth2.0`ê¹Œì§€ ì±•í„°ê¹Œì§€ ì™„ë£Œ í–ˆë‹¤.
í•˜ì§€ë§Œ ë‚´ê°€ ì“´ ì½”ë“œì§€ë§Œ í•˜ë‚˜ë„ ì´í•´ê°€ ë˜ì§€ ì•Šì•˜ë‹¤(ê·¸ëƒ¥ ë”°ë¼ì¹˜ê¸°ë§Œ í•œê±° ê°™ë‹¤...). ë¨¸ë¦¬ì†ì— ë³„ë¡œ ë‚¨ì€ê²ƒì´ ì—†ë‹¤. ğŸ˜‚ğŸ˜‚ ê·¸ë˜ì„œ ì±…ì—ì„œ í•˜ê³  ë‚¨ì€ ì½”ë“œë¥¼ ì´í•´ ë° ë™ì‘ ë°©ë²•ì— ëŒ€í•œ ê¸€ì„ ì“°ê²Œ ë˜ì—ˆë‹¤.

# ğŸ”’ Spring Security
![](https://images.velog.io/images/park9910/post/dc139b53-7a2c-4973-ba88-23fb96b06b2e/image.png)

ë¨¼ì € ì‹œíë¦¬í‹°ì— ëŒ€í•´ ì•Œì•„ë³´ì!
- ê°„ë‹¨íˆ ë§í•˜ë©´ ìŠ¤í”„ë§ ê¸°ë°˜ì˜ ë³´ì•ˆì„ ë‹´ë‹¹í•˜ëŠ” ìŠ¤í”„ë§ í•˜ìœ„ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. CSRF ê³µê²©, ì„¸ì…˜ ê³ ì •(session fixation) ê³µê²©ì„ ë°©ì–´ í•´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. 

- ë¨¼ì € ì‹œíë¦¬í‹°ì—ì„œ ì‚¬ìš©í•˜ëŠ” ìš©ì–´ë¥¼ ì•Œì•„ë´…ì‹œë‹¤!
- **ì¸ì¦ (Authentication)**
  ì‚¬ìš©ìì˜ ì‹ ì›ì„ ì…ì¦í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì¦‰,ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ì„ í•  ë•Œ ëˆ„êµ¬ì¸ì§€ í™•ì¸í•˜ëŠ” ê³¼ì •

- **ì¸ê°€ (Authoriztion)**
  ì¸ê°€ëŠ” ì‚¬ì´íŠ¸ì˜ íŠ¹ì • ë¶€ë¶„ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì‘ì—…ì…ë‹ˆë‹¤.
  ì˜ˆë¥¼ ë“¤ì–´ ì‡¼í•‘ë¬¼ ì‚¬ì´íŠ¸ì— "ADMIN", "MANAGER", "USER"ë¼ëŠ” ê¶Œí•œìë“¤ì´ ìˆë‹¤ê³  í•´ë³´ì£  "USER"ì˜ ê¶Œí•œì„ ê°€ì§„ ì¼ë°˜ ì‚¬ìš©ìê°€ ì‡¼í•‘ë¬¼ ê´€ë¦¬ ëª©ë¡ì— ë“¤ì–´ê°€ì„œ A í’ˆëª©ì˜ ê°€ê²©ì„ ë‚®ì¶˜ë‹¤ê³  ìƒê°í•´ë´…ì‹œë‹¤.
  ì´ëŸ¬ë©´ ê·¸ ì‡¼í•‘ë¬¼ì€ ì•„ë¬´ë„ ì‚¬ìš©í•˜ì§€ ì•Šê² ì£ ? ì¼ë°˜ ì‚¬ìš©ìë“¤ì€ ê´€ë¦¬ì í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ê¶Œí•œ("ADMIN". "MANAGER")ì„ í™•ì¸í•˜ëŠ” ê³¼ì •ì„ **ì¸ê°€**ë¼ê³  í•©ë‹ˆë‹¤.


## ğŸš° ì‹œíë¦¬í‹° í•„í„°
![ì‹œíë¦¬í‹°í•„í„°](https://velog.velcdn.com/images%2Fsa833591%2Fpost%2F22bfb140-02b5-4fcf-aeed-8900d76044df%2FSecurityFilterChain2.JPG)
ì‹œíë¦¬í‹°ëŠ” í•„í„° ê¸°ë°˜ì˜ êµ¬ì¡°ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

| ì´ë¦„                                       | ì„¤ëª…                                                                                                                                             |
| ---------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| SecurityContextPersistenceFilter         | SecurityContextRepositoryì—ì„œ SecurityContext(ì ‘ê·¼ ì£¼ì²´ì™€ ì¸ì¦ì— ëŒ€í•œ ì •ë³´ë¥¼ ë‹´ê³  ìˆëŠ” ê°ì²´)ë¥¼ ê°€ì ¸ì˜¤ê±°ë‚˜ ì €ì¥í•˜ëŠ” ì—­í•                                                          |
| LogoutFilter                             | ì„¤ì •ëœ ë¡œê·¸ì•„ì›ƒ URLë¡œ ì˜¤ëŠ” ìš”ì²­ì„ í™•ì¸í•´ í•´ë‹¹ ì‚¬ìš©ìë¥¼ ë¡œê·¸ì•„ì›ƒ ì²˜ë¦¬                                                                                                       |
| **UsernamePasswordAuthenticationFIlter** | ì¸ì¦ ê´€ë¦¬ì, í¼ ê¸°ë°˜ ë¡œê·¸ì¸ì„ í•  ë•Œ ì‚¬ìš©ë˜ëŠ” í•„í„°ë¡œ ì•„ì´ë””, íŒ¨ìŠ¤ì›Œë“œ ë°ì´í„°ë¥¼ íŒŒì‹±í•´ ì¸ì¦ ìš”ì²­ì„ ìœ„ì„, ì¸ì¦ ì„±ê³µì‹œ AuthenticationSuccessHandlerë¥¼, ì‹¤íŒ¨ ì‹œ AuthenticationFailureHandlerë¥¼ ì‹¤í–‰       |
| DefaultLoginPageGeneratingFilter         | ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ì„ ë•Œ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í•˜ëŠ” ë¡œê·¸ì¸ í˜ì´ì§€ ê´€ë ¨ í•„í„°                                                                                               |
| BasicAuthenticationFilter                | ìš”ì²­ í—¤ë”ì— ìˆëŠ” ì•„ì´ë””ì™€ íŒ¨ìŠ¤ì›Œë“œë¥¼ íŒŒì‹±í•´ì„œ ì¸ì¦ ìš”ì²­ì„ ìœ„ì„í•©ë‹ˆë‹¤. ì¸ì¦ì´ ì„±ê³µí•˜ë©´ AuthenticationSuccessHandlerë¥¼, ì¸ì¦ì— ì‹¤íŒ¨í•˜ë©´ AuthenticationFailureHandlerë¥¼ ì‹¤í–‰                      |
| RequestCacheAwareFilter                  | ë¡œê·¸ì¸ ì„±ê³µ í›„, ê´€ë ¨ ìˆëŠ” ìºì‹œ ìš”ì²­ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ìºì‹œ ìš”ì²­ì„ ì²˜ë¦¬í•´ì¤ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ë°©ë¬¸í–ˆë˜ í˜ì´ì§€ë¥¼ ê¸°ì–µí•´ë‘ì—ˆë‹¤ê°€ ë¡œê·¸ì¸ ì´í›„ì— ê·¸í˜ì´ì§€ë¡œ ì´ë™ì‹œì¼œì¤ë‹ˆë‹¤.                                     |
| SecurityContextHolderAwareRequestFilter  | HttpServletRequest ì •ë³´ë¥¼ ê°ìŒ‰ë‹ˆë‹¤. í•„í„° ì²´ì¸ ìƒì˜ ë‹¤ìŒ í•„í„°ë“¤ì—ê²Œ  ë¶€ê°€ ì •ë³´ë¥¼ ì œê³µ í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤.                                                                         |
| AnonymousAuthentication                  | í•„í„°ê°€ í˜¸ì¶œë˜ëŠ” ì‹œì ê¹Œì§€ ì¸ì¦ë˜ì§€ ì•Šì•˜ë‹¤ë©´ ìµëª… ì‚¬ìš©ì ì „ìš© ê°ì²´ì¸ AnoymousAuthenticationì„ ë§Œë“¤ì–´ SecurityContextì— ë„£ì–´ ì¤ë‹ˆë‹¤.                                                     |
| SessionManagermentFilter                 | ì¸ì¦ëœ ì‚¬ìš©ìì™€ ê´€ë ¨ëœ ì„¸ê²¬ ê´€ë ¨ ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì„¸ì…˜ ë³€ì¡° ë°©ì§€ ì „ëµì„ ì„¤ì •í•˜ê³ , ìœ íš¨í•˜ì§€ ì•Šì€ ì„¸ì…˜ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ í•˜ê³ , ì„¸ì…˜ ìƒì„± ì „ëµì„ ì„¸ìš°ëŠ” ë“±ì˜ ì‘ì—…ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.                                            |
| ExceptionTranslationFilter               | ìš”ì²­ì— ì²˜ë¦¬í•˜ëŠ” ì¤‘ì— ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜ˆì™¸ë¥¼ ìœ„ì„í•˜ê±°ë‚˜ ì „ë‹¬í•©ë‹ˆë‹¤.                                                                                                          |
| FilterSecurityInterceptor                | ì ‘ê·¼ ê²°ì • ê´€ë¦¬ìì…ë‹ˆë‹¤. AccessDecisionManagerë¡œ ê¶Œí•œ ë¶€ì—¬ ì²˜ë¦¬ë¥¼ ìœ„ì„í•¨ìœ¼ë¡œì¨ ì ‘ê·¼ ì œì–´ ê²°ì •ì„ ì‰½ê²Œ í•´ì¤ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œëŠ” ì´ë¯¸ ì‚¬ìš©ìê°€ ì¸ì¦ë˜ì–´ ìˆìœ¼ë¯€ë¡œ ìœ íš¨í•œ ì‚¬ìš©ìì¸ì§€ë„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, ì¸ê°€ ê´€ë ¨ ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. |
ì—¬ê¸°ì„œ `UsernamePasswordAuthenticationFilter`ëŠ” Id, Passwordê°€ ë„˜ì–´ì˜¤ë©´ ì¸ì¦ ìš”ì²­ì„ ìœ„ì„í•˜ëŠ” ì¸ì¦ ê´€ë¦¬ì ì—­í• ì„ í•œë‹¤.
ê·¸ë¦¬ê³  `FilterSecurityInterceptor`ëŠ” ê¶Œí•œ ë¶€ì—¬ ì²˜ë¦¬ë¥¼ ìœ„ì„í•´ ì ‘ê·¼ ì œì–´ ê²°ì •ì„ ì‰½ê²Œ í•˜ëŠ” ì ‘ê·¼ ê²°ì • ê´€ë¦¬ì ì—­í• ì„ í•©ë‹ˆë‹¤.

FilterëŠ” Dispatcher Servletìœ¼ë¡œ ê°€ê¸° ì „ì— ì ìš©ë˜ë¯€ë¡œ ê°€ì¥ ë¨¼ì € URL ìš”ì²­ì„ ë°›ì§€ë§Œ, (ì›¹ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬)  
InterceptorëŠ” Dispatcherì™€ Controller ì‚¬ì´ì— ìœ„ì¹˜í•œë‹¤ëŠ” ì ì—ì„œ ì ìš© ì‹œê¸°ì˜ ì°¨ì´ê°€ ìˆë‹¤. (ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì—ì„œ ê´€ë¦¬)
> Client (request) â†’ **Filter** â†’ DispatcherServlet â†’ **Interceptor** â†’ Controller  
   (ì‹¤ì œë¡œ Interceptorê°€ Controllerë¡œ ìš”ì²­ì„ ìœ„ì„í•˜ëŠ” ê²ƒì€ ì•„ë‹˜, Interceptorë¥¼ ê±°ì³ì„œ ê°€ëŠ” ê²ƒ


## ìŠ¤í”„ë§ ì‹œíë¦¬í‹° ì¸ì¦ ì•„í‚¤í…ì²˜
![ì•„í‚¤í…ì³](https://blog.kakaocdn.net/dn/vzTzL/btrlpKwO4uN/FJuZlTVXUPwOT9QonIMQhk/img.png)

1. id, password ì…ë ¥ì‹œ,  HTTPServletRequestì— ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ê°€ ì „ë‹¬ëœë‹¤. ê·¸ë¦¬ê³  ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ì •ë³´ê°€ ì „ë‹¬ëœë‹¤. AuthenticationFilterê°€ ë„˜ì–´ì˜¨ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ì˜ ìœ íš¨ì„± ê²€ì‚¬ë¥¼ í•œë‹¤.
2. ìœ íš¨ì„± ê²€ì‚¬ê°€ ëë‚˜ë©´ ì‹¤ì²´ êµ¬í˜„ì²´ì¸ UsernamePasswordAythenticationTokenì„ ë§Œë“¤ì–´ ë„˜ê²¨ì¤€ë‹¤.
3. ì „ë‹¬ë°›ì€ ì¸ì¦ìš© ê°ì²´ì¸ UsernamePasswordAuthenticationTokenì„ AuthenticationManager(ì‹¤ì œë¡œ ì¸ì¦ì„ ì²˜ë¦¬í•˜ëŠ” AuthenticationProviderë¥¼ ê°€ì§€ê³  ìˆìŒ)ì—ê²Œ ë³´ë‚¸ë‹¤.
4. UsernamePasswordAuthenticationTokenì„ AuthenticationProviderì— ë³´ë‚¸ë‹¤.
5. AuthenticationProviderì—ì—ì„œ ì•„ì´ë”” ì¡°íšŒ í›„, ì‚¬ìš©ì ì•„ì´ë””ë¥¼ UserDetailServiceì— ë³´ë‚¸ë‹¤. UserDetailServiceëŠ” ì‚¬ìš©ì ì•„ì´ë””ë¡œ ì°¾ì€ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ UserDetails ê°ì²´ë¡œ ë§Œë“¤ì–´ AuthenticationProviderì—ê²Œ ì „ë‹¬(UserDetailsServiceëŠ” ì¸í„°í˜ì´ìŠ¤ì´ë¯€ë¡œ ìƒì†ë°›ì•„ ì¬ì •ì˜í•œ í´ë˜ìŠ¤ ì‘ì„± í•„ìš”)
6. DBì— ìˆëŠ” ì‚¬ìš©ì ì •ë³´ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
7. ì…ë ¥ ì •ë³´ì™€ UserDetailsì˜ ì •ë³´ë¥¼ ë¹„êµí•´ ì‹¤ì œ ì¸ì¦ ì²˜ë¦¬ë¥¼ í•œë‹¤.
8. 10ë²ˆ ê³¼ì •ê¹Œì§€ ì¸ì¦ì´ ì™„ë£Œë˜ë©´ SecurityContextHolderì— Authenticationì„ ì €ì¥í•œë‹¤. ì¸ì¦ ì„±ê³µ ì—¬ë¶€ì— ë”°ë¼ ì„±ê³µí•˜ë©´ AuthenticationSuccessHandler, ì‹¤íŒ¨í•˜ë©´ AuthenticationFailureHandler í•¸ë“¤ëŸ¬ë¥¼ ì‹¤í–‰í•œë‹¤.
# ğŸ” **Cookie / Session / Token** ì¸ì¦ ë°©ì‹ ì¢…ë¥˜
ë³´í†µ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„ í™•ì¸í•˜ëŠ” ë°©ì‹ì€ ëŒ€í‘œì ìœ¼ë¡œ ì¿ í‚¤, ì„¸ì…˜, í† í° 3ê°€ì§€ ë°©ì‹ì´ ìˆë‹¤.

## ğŸª Cookie ì¸ì¦
ì¿ í‚¤ëŠ” Key-Value í˜•ì‹ì˜ ë¬¸ìì—´ ë©ì–´ë¦¬ì´ë‹¤.
í´ë¼ì´ì–¸íŠ¸ê°€ ì–´ë– í•œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ë°©ë¬¸í•  ê²½ìš°, ê·¸ ì‚¬ì´íŠ¸ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ì„œë²„ë¥¼ í†µí•´ í´ë¼ì´ì–¸íŠ¸ì˜ ë¸Œë¼ìš°ì €ì— ì„¤ì¹˜ë˜ëŠ” ì‘ì€ ê¸°ë¡ ì •ë³´ íŒŒì¼ì´ë‹¤. ê° ì‚¬ìš©ìë§ˆë‹¤ ë¸Œë¼ìš°ì €ì— ì •ë³´ë¥¼ ì €ì¥í•˜ë‹ˆ ê³ ìœ  ì •ë³´ ì‹ë³„ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.
![Cookieì¸ì¦ ë°©ì‹ ì´ë¯¸ì§€](./images/Cookieì¸ì¦.png)

1. ë¸Œë¼ìš°ì €ê°€ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
2. ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì„ ì‘ì„±í•  ë•Œ, í´ë¼ì´ì–¸íŠ¸ ì¸¡ì— ì €ì¥í•˜ê³  ì‹¶ì€ ì •ë³´ë¥¼ ì‘ë‹µ í—¤ë”ì˜ Set-Cookieì— ë‹´ëŠ”ë‹¤.
3. ì´í›„ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ëŠ” ìš”ì²­ì„ ë³´ë‚¼ ë•Œë§ˆë‹¤, ë§¤ë²ˆ ì €ì¥ëœ ì¿ í‚¤ë¥¼ ìš”ì²­ í—¤ë”ì˜ Cookieì— ë‹´ì•„ ë³´ë‚¸ë‹¤.
   ì„œë²„ëŠ” ì¿ í‚¤ì— ë‹´ê¸´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ í•´ë‹¹ ìš”ì²­ì˜ í´ë¼ì´ì–¸íŠ¸ê°€ ëˆ„êµ°ì§€ ì‹ëµ¬í•˜ê±°ë‚˜ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì¶”ì²œ ê´‘ê³ ë¥¼ ë„ìš°ê±°ë‚˜ í•œë‹¤.

## ë‹¨ì 
- ë³´ì•ˆì— ì·¨ì•…, ìš”ì²­ ì‹œ ì¿ í‚¤ì˜ ê°’ì„ ê·¸ëŒ€ë¡œ ë³´ë‚´ê¸° ë•Œë¬¸ì— ìœ ì¶œ ë° ì¡°ì‘ ë‹¹í•  ìœ„í—˜ì´ ì¡´ì¬í•œë‹¤.
- ì¿ í‚¤ì—ëŠ” ìš©ëŸ‰ ì œí•œì´ ìˆì–´ ë§ì€ ì •ë³´ë¥¼ ë‹´ì„ ìˆ˜ ì—†ë‹¤.
- ì›¹ ë¸Œë¼ìš°ì €ë§ˆë‹¤ ì¿ í‚¤ì— ëŒ€í•œ ì§€ì› í˜•íƒœê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ê°„ ê³µìœ ê°€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
- ì¿ í‚¤ì˜ ì‚¬ì´ì¦ˆê°€ ì»¤ì§ˆìˆ˜ë¡ ë„¤íŠ¸ì›Œí¬ì— ë¶€í•˜ê°€ ì‹¬í•´ì§„ë‹¤.

## ğŸ–¥ï¸ Session ì¸ì¦
ì„¸ì…˜ì€ ë¹„ë°€ë²ˆí˜¸ ë“± í´ë¼ì´ì–¸íŠ¸ì˜ ë¯¼ê°í•œ ì¸ì¦ ì •ë³´ë¥¼ ë¸Œë¼ìš°ì €ê°€ ì•„ë‹Œ ì„œë²„ ì¸¡ì— ì €ì¥í•˜ê³  ê´€ë¦¬í•œë‹¤. ì„œë²„ì˜ ë©”ëª¨ë¦¬ì— ì €ì¥í•˜ê¸°ë„ í•˜ê³ , ì„œë²„ì˜ ë¡œì»¬ íŒŒì¼ì´ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥í•˜ê¸°ë„ í•œë‹¤.

> ì„¸ì…˜ ê°ì²´ëŠ” Keyì— í•´ë‹¹í•˜ëŠ” SESSION IDì™€ ì´ì— ëŒ€ì‘í•˜ëŠ” Valueë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤. Valueì—ëŠ” ì„¸ì…˜ ìƒì„± ì‹œê°„, ë§ˆì§€ë§‰ ì ‘ê·¼ ì‹œê°„ ë° Userê°€ ì €ì¥ëœ ì†ì„± ë“± Map í˜•íƒœë¡œ ì €ì¥ëœë‹¤.

![Session ì¸ì¦ ë°©ì‹ ì´ë¯¸ì§€](./images/Sessionì¸ì¦ë°©ì‹.png)
1. ìœ ì €ê°€ ì›¹ì‚¬ì´íŠ¸ì—ì„œ ë¡œê·¸ì¸ì„ í•˜ë©´ ì„¸ì…˜ì´ ì„œë²„ ë©”ëª¨ë¦¬(í˜¹ì€ DB) ìƒì— ì €ì¥ëœë‹¤.
   ì„¸ì…˜ì„ ì‹ë³„í•˜ê¸° ìœ„í•œ Session Idë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤.
2. ì„œë²„ì—ì„œ ë¸Œë¼ìš°ì €ì— ì¿ í‚¤ì—ë‹¤ê°€ Session Idë¥¼ ì €ì¥í•œë‹¤.
3. ì¿ í‚¤ì— ì •ë³´ê°€ ë‹´ê²¨ìˆê¸° ë•Œë¬¸ì— ë¸Œë¼ìš°ì €ëŠ” í•´ë‹¹ ì‚¬ì´íŠ¸ì— ëŒ€í•œ ëª¨ë“  Requestì— Session Idë¥¼ ì¿ í‚¤ì— ë‹´ì•„ ì „ì†¡í•œë‹¤.
4. ì„œë²„ëŠ” í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ Session Idì™€ ë©”ëª¨ë¦¬ë¡œ ê´€ë¦¬í•˜ê³  ìˆëŠ” Session Idë¥¼ ë¹„êµí•˜ì—¬ ì¸ì¦ ìˆ˜í–‰í•œë‹¤.
## ë‹¨ì 
1. ì¿ í‚¤ë¥¼ í¬í•¨í•œ ìš”ì²­ì´ ì™¸ë¶€ì— ë…¸ì¶œ ë˜ë”ë¼ë„ ì„¸ì…˜ ID ìì²´ëŠ” ìœ ì˜ë¯¸í•œ ê°œì¸ì •ë³´ë¥¼ ë‹´ê³  ìˆì§€ ë‚³ëŠ”ë‹¤. ê·¸ëŸ¬ë‚˜ í•´ì»¤ê°€ ì„¸ì…˜ ID ìì²´ë¥¼ íƒˆì·¨í•˜ì—¬ í´ë¼ì´ì–¸íŠ¸ì¸ì²™ ìœ„ì¥í•  ìˆ˜ ìˆë‹¤ëŠ” í•œê³„ê°€ ì¡´ì¬ í•œë‹¤.
2. ì„œë²„ì—ì„œ ì„¸ì…˜ ì €ì¥ì†Œë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ ìš”ì²­ì´ ë§ì•„ì§€ë©´ ì„œë²„ì— ë¶€í•˜ê°€ ì‹¬í•´ì§„ë‹¤.
> ë§ì€ íŠ¸ë˜í”½ ë°œìƒì‹œ ì„œë²„ëŠ” ë¬´ìƒíƒœ(Statless)ë¥¼ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¢‹ê¸° ë•Œë¬¸ì—(ëŒ€ì²´ë¥¼ ìˆ˜ì›”í•˜ê¸° ë•Œë¬¸) Sessionì—ë‹¤ê°€ ë„ˆë¬´ ë§ì€ ì •ë³´ë¥¼ ë‹´ìœ¼ë©´ ì•ˆëœë‹¤.

## ğŸª™ Token ì¸ì¦
í† í° ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œì€ í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ì ‘ì†ì„ í•˜ë©´ ì„œë²„ì—ê²Œ í•´ë‹¹ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ì¸ì¦ë˜ì—ˆë‹¤ëŠ” ì˜ë¯¸ë¡œ 'í† í°'ì„ ë¶€ì—¬í•œë‹¤. ì´ í† í°ì€ ìœ ì¼í•˜ë©° í† í°ì„ ë°œê¸‰ë°›ì€ í´ë¼ì´ì–¸íŠ¸ ë˜ ë‹¤ì‹œ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚¼ ë•Œ ìš”ì²­ í—¤ë”ì— í† í°ì„ ì‹¬ì–´ì„œ ë³´ë‚¸ë‹¤. ì„œë²„ì—ì„œëŠ” í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ í† í°ì„ ì„œë²„ì—ì„œ ì œê³µí•œ í† í°ê³¼ì˜ ì¼ì¹˜ ì—¬ë¶€ë¥¼ ì²´í¬í•˜ì—¬ ì¸ì¦ ê³¼ì •ì„ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.

ì„¸ì…˜ ì¸ì¦ ê°™ì€ ê²½ìš°ëŠ” ì„œë²„ì˜ ë©”ëª¨ë¦¬ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì •ë³´ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ ë˜ì§€ë§Œ í† í°ì€ ì„¸ì…˜ê³¼ëŠ” ë‹¬ë¦¬ ì„œë²„ê°€ ì•„ë‹Œ í´ë¼ì´ì–¸íŠ¸ì— ì €ì¥ë˜ê¸° ëœë‹¤. í† í° ìì²´ì— ë°ì´í„°ê°€ ë“¤ì–´ìˆê¸° ë•Œë¬¸ì— í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë°›ì•„ ìœ„ì¡°ë˜ì—ˆëŠ”ì§€ íŒë³„ë§Œ í•˜ë©´ ëœë‹¤.

> í† í° ê¸°ë°˜ ì¸ì¦ì€ ê°™ì€ ê²½ìš°ëŠ” í´ë¼ì´ì–¸íŠ¸ì—ì„œ í† í°ì„ ê°€ì§€ê³  ìˆë‹¤ê°€ ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì‘ì—…ì¼ ê²½ìš° í—¤ë”ì— í† í°ì„ í•¨ê»˜ ë³´ë‚´ ì¸ì¦ë°›ì€ ì‚¬ìš©ìì¸ì§€ í™•ì¸í•œë‹¤. ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ì‹œìŠ¤í…œê³¼ ë‹¬ë¦¬ ìƒíƒœë¥¼ ìœ ì§€í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— Stateless(ë¬´ìƒíƒœ)í•œ íŠ¹ì§•ì„ ê°€ì§€ê³  ìˆë‹¤.

1. ì‚¬ìš©ìê°€ ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¡œ ë¡œê·¸ì¸ì„ í•œë‹¤.
2. ì„œë²„ ì¸¡ì—ì„œ ì‚¬ìš©ìì—ê²Œ ìœ ì¼í•œ í† í°ì„ ë°œê¸‰í•œë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ ì¸¡ì—ì„œ ì „ë‹¬ë°›ì€ í† í°ì„ ì¿ í‚¤ë‚˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•´ ë‘ê³ , ì„œë²„ì— ìš”ì²­ì„ í•  ë•Œë§ˆë‹¤ í•´ë‹¹ í† í°ì„ HTTP ìš”ì²­ í—¤ë”ì— í¬í•¨ì‹œì¼œ ì „ë‹¬í•œë‹¤.
4. ì„œë²„ëŠ” ì „ë‹¬ë°›ì€ í† í°ì„ ê²€ì¦í•˜ê³  ìš”ì²­ì— ì‘ë‹µí•œë‹¤.

## ë‹¨ì 
1. ë°ì´í„°ì˜ ê¸¸ì´ê°€ ê¸¸ì–´, ì¸ì¦ ìš”ì²­ì´ ë§ì•„ì§ˆìˆ˜ë¡ ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ê°€ ì‹¬í•´ì§ˆ ìˆ˜ ìˆë‹¤.
2. Payload ìì²´ëŠ” ì•”í˜¸í™”ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìœ ì €ì˜ ì¤‘ìš”í•œ ì •ë³´ëŠ” ë‹´ì„ ìˆ˜ ì—†ë‹¤.
3. í† í°ì„ íƒˆì·¨ ë‹¹í•˜ë©´ ëŒ€ì²´í•˜ê¸° ì–´ë µë‹¤. (ì´ë¥¼ ë°©ì§€í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ì‚¬ìš© ê¸°ê°„ ì œí•œì„ ì„¤ì •í•˜ëŠ” ì‹ìœ¼ë¡œ ê·¹ë³µí•œë‹¤.)

# ğŸ”’ JWT(JSON Web Token)
![JWT-image](https://img1.daumcdn.net/thumb/R1280x0.fpng/?fname=http://t1.daumcdn.net/brunch/service/user/dkta/image/mZyUgQW1H1vk_TFaK2FZbvZqyBM.png)

JWTì´ë€ ì¸ì¦ì— í•„ìš”í•œ ì •ë³´ë“¤ì„ ì•”í˜¸í™”ì‹œí‚¨ JSON í† í°ì„ ì˜ë¯¸í•œë‹¤. JWT í† í°ì„ HTTP í—¤ë”ì— ì‹¤ì–´ ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‹ë³„í•œë‹¤.

JWTëŠ” JSON ë°ì´í„°ë¥¼ Base64 URL-safe Encodeë¥¼ í†µí•´ ì¸í† ë”©í•˜ì—¬ ì§ë ¬í™”í•œ ê²ƒì´ë‹¤. í† í° ë‚´ë¶€ì—ì„œëŠ” ìœ„ë³€ì¡° ë°©ì§€ë¥¼ ìœ„í•´ ê°œì¸í‚¤ë¥¼ í†µí•œ ì „ìì„œëª…ë„ ë“¤ì–´ê°€ ìˆë‹¤.
ì‚¬ìš©ìê°€ JWTë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ë©´ ì„œë²„ëŠ” ì„œëª…ì„ ê²€ì¦í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë˜ë©° ê²€ì¦ì´ ì™„ë£Œë˜ë©´ ìš”ì²­í•œ ì‘ë‹µì„ ëŒë ¤ì¤€ë‹¤.
![JWT êµ¬ì¡°](https://velog.velcdn.com/images/fill0006/post/e3f51695-55f3-451e-b639-41020efa02a9/image.png)

## Header
```json
{
	"alg": "HS256",
	"typ": "JWT"
}
```
alg : ì„œëª… ì•Œê³ ë¦¬ì¦˜ (RSA, HMAC SHA256)
typ : í† í° ìœ í˜•


## Payload
```JSON
{ 
	"sub": "1234567890",
	"name": "John Doe",
	"admin": true 
}
```
í† í°ì—ì„œ ì‚¬ìš©í•  ì •ë³´(Claim)ë“¤ì´ ë“¤ì–´ê°€ìˆë‹¤. (ì‹¤ì œ JWTë¥¼ í†µí•´ì„œ ì•Œ ìˆ˜ ìˆëŠ” ë°ì´í„°)

ì¦‰, ì‹œìŠ¤í…œì—ì„œ ì‹¤ì œë¡œ ì‚¬ìš©ë  ì •ë³´ì— ëŒ€í•œ ë‚´ìš©
>key-value í˜•ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ í•œ ìŒì˜ ì •ë³´ë¥¼ Claimì´ë¼ê³  ì¹­í•œë‹¤.

í˜ì´ë¡œë“œì—ëŠ” ì •í•´ì§„ íƒ€ì…ì€ ì—†ì§€ë§Œ, ëŒ€í‘œì ìœ¼ë¡œ Registered claims, Public claims, Private claims ì´ë ‡ê²Œ ì„¸ ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.

Registered claims: ë¯¸ë¦¬ ì •ì˜ëœ í´ë ˆì„
- iss (issuer) : í† í° ë°œê¸‰ì  
* sub (subject) : í† í° ì œëª© - í† í°ì—ì„œ ì‚¬ìš©ìì— ëŒ€í•œ ì‹ë³„ ê°’ì´ ë¨  
* aud (Audience) : í† í° ëŒ€ìƒì  
* exp (Expiration Time) : í† í° ë§Œë£Œ ê¸°ê°„  
* nbf (Not Before) : í† í° í™œì„± ë‚ ì§œ (ì´ ë‚ ì§œ ì´ì „ì˜ í† í°ì€ í™œì„±í™”ë˜ì§€ ì•ŠìŒì„ ë³´ì¥)  
* iat (Issued At) í† í° ë°œê¸‰ ì‹œê°„  
* jti (JWT id) : JWT í† í° ì‹ë³„ì (issuerê°€ ì—¬ëŸ¬ ëª…ì¼ ë•Œ ì´ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ê°’)
ë¬¼ë¡  ì´ ì „ë¶€ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•„ë„ ë˜ì§€ë§Œ ë³´ì•ˆì„ ìœ„í•´ ê¶Œì¥ì„ í•œë‹¤.

Public claims: ì‚¬ìš©ìê°€ ì •ì˜í•  ìˆ˜ ìˆëŠ” í´ë ˆì„ ê³µê°œìš© ì •ë³´ ì „ë‹¬ì„ ìœ„í•´ ì‚¬ìš©.
Private claims: í•´ë‹¹í•˜ëŠ” ë‹¹ì‚¬ìë“¤ ê°„ì— ì •ë³´ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ ë§Œë“¤ì–´ì§„ ì‚¬ìš©ì ì§€ì • í´ë ˆì„. ì™¸ë¶€ì— ê³µê°œë˜ë„ ìƒê´€ì—†ì§€ë§Œ í•´ë‹¹ ìœ ì €ë¥¼ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ì„ ë‹´ëŠ”ë‹¤. (email ê°™ì€ ê²ƒë“¤)

## Signature
```java
HMACSHA256( 
	base64UrlEncode(header) + "." +
    base64UrlEncode(payload), 
    secret) // secretëŠ” ì„œë²„ê°€ ê°€ì§€ê³  ìˆëŠ” í‚¤
```
ì‹œê·¸ë‹ˆì²˜ì—ì„œ ì‚¬ìš©í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì€ í—¤ë”ì—ì„œ ì •ì˜í•œ ì•Œê³ ë¦¬ì¦˜ ë°©ì‹ì„ í™œìš©í•œë‹¤.
ì‹œê·¸ë‹ˆì²˜ êµ¬ì¡°ëŠ” (í—¤ë” + í˜ì´ë¡œë“œ)ì™€ ì„œë²„ê°€ ê°–ê³  ìˆëŠ” ìœ ì¼í•œ key ê°’ì„ í•©ì¹œ ê²ƒì„ í—¤ë”ì—ì„œ ì •ì˜í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì•”í˜¸í™”ë¥¼ í•œë‹¤.

>Headerì™€ PayloadëŠ” ì œ 3ìê°€ ë³µí˜¸í™” ë° ì¡°ì‘ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, SignatureëŠ” ì„œë²„ì¸¡ì—ì„œ ê´€ë¦¬í•˜ëŠ” ë¹„ë°€í‚¤ê°€ ìœ ì¶œë˜ì§€ ì•ŠëŠ” ì´ìƒ ë³µí˜¸í™”í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ **SignatureëŠ” í† í°ì˜ ìœ„ë³€ì¡° ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.**

## ğŸ”„ JWTë¥¼ ì´ìš©í•œ ì¸ì¦ê³¼ì •
![JWTë¥¼ ì´ìš©í•œ ì¸ì¦ê³¼ì •](https://velog.velcdn.com/images/fill0006/post/3d962086-bcdd-42ac-ac8c-7c361f8db673/image.png)
1. ì‚¬ìš©ìê°€ ID, PWë¥¼ ì…ë ¥í•˜ì—¬ ì„œë²„ì— ë¡œê·¸ì¸ ì¸ì¦ì„ ìš”ì²­í•œë‹¤.
2. ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ì¸ì¦ ìš”ì²­ì„ ë°›ìœ¼ë©´ Header, PayLoad, Sinatureë¥¼ ì •ì˜í•œë‹¤.
   ê°ê° Base64ë¡œ ì•”í˜¸í™”í•˜ì—¬ JWTë¥¼ ìƒì„±í•˜ê³  ì´ë¥¼ ì¿ í‚¤ì— ë‹´ì•„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë°œê¸‰í•œë‹¤.
3. í´ë¼ì´ì–¸íŠ¸ëŠ” ì„œë²„ë¡œë¶€í„° ë°›ì€ JWTë¥¼ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•œë‹¤.(ì¿ í‚¤ì—ë„ ì €ì¥ ê°€ëŠ¥)
   ë¡œê·¸ì¸ì´ í•„ìš”í•œ í˜ì´ì§€ì— ì ‘ê·¼ì‹œ Authorization headerì— Access Tokennì„ ë‹´ì•„ì„œ ë³´ë‚¸ë‹¤.
4. ì„œë²„ì˜ í•  ì¼ì€ í´ë¼ì´ì–¸íŠ¸ê°€ Headerì— ë‹´ì•„ì„œ ë³´ë‚¸ JWTê°€ ì„œë²„ì—ì„œ ë°œí–‰í•œ í† í°ì¸ì§€ ì¼ì¹˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ì¼ì¹˜ì‹œ ì¸ì¦ì„ í†µê³¼ ì‹œì¼œì£¼ê³  ì•„ë‹ˆë¼ë©´ í†µê³¼ì‹œí‚¤ì§€ ì•Šìœ¼ë©´ ëœë‹¤.
5. í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ì— ìš”ì²­ì„ í–ˆëŠ”ë°, ë§Œì¼ ì•¡ì„¹ìŠ¤ í† í°ì˜ ì‹œê°„ì´ ë§Œë£Œë˜ë©´ í´ë¼ì´ì–¸íŠ¸ëŠ” ë¦¬í”„ë˜ì‹œ í† í°ì„ ì´ìš©í•´ì„œ
6. ì„œë²„ë¡œë¶€í„° ìƒˆë¡œìš´ ì—‘ì„œìŠ¤ í† í°ì„ ë°œê¸‰ ë°›ëŠ”ë‹¤.

## ğŸ¦¾ í† í° ì¸ì¦ ì‹ ë¢°ì„±ì„ ê°€ì§€ëŠ” ì´ìœ 
JWT: A(Header) + B(Payload) + C(signature) ì¼ë•Œ
1. ë‹¤ë¥¸ ì‚¬ìš©ìê°€ Bë¥¼ ì„ì˜ë¡œ ìˆ˜ì •
2. ìˆ˜ì •í•œ í† í°ì„ ì„œë²„ì— ìš”ì²­ì„ ë³´ë‚´ë©´ ì„œë²„ëŠ” ìœ íš¨ì„±ì„ ê²€ì‚¬ ì‹œí–‰
   ì„œë²„ì—ì„œ ê²€ì¦ í›„ ìƒì„±í•œ JWT: A + B + C => (signature) ë¶ˆì¼ì¹˜
3. ëŒ€ì¡° ê²°ê³¼ê°€ ì¼ì¹˜í•˜ì§€ ì•Šì•„ ìœ ì €ì˜ ì •ë³´ê°€ ì„ì˜ë¡œ ì¡°ì‘ë˜ì—ˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.

ì„œë²„ëŠ” í† í° ì•ˆì— ìˆëŠ” ì •ë³´ê°€ ë¬´ì—‡ì¸ì§€ ê¶ê¸ˆí•˜ì§€ ì•Šë‹¤. í•´ë‹¹ í† í°ì´ ìœ íš¨í•œ í† í°ì¸ì§€ í™•ì¸í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.
 í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë°›ì€ JWT í—¤ë”, í˜ì´ë¡œë“œë¥¼ ì„œë²„ì˜ keyê°’ì„ ì´ìš©í•´ ì‹œê·¸ë‹ˆì²˜ë¥¼ ë‹¤ì‹œ ë§Œë“¤ê³  ì´ë¥¼ ë¹„êµí•˜ë©° ì¼ì¹˜í–ˆì„ ê²½ìš° ì¸ì¦ì„ í†µê³¼ì‹œí‚¨ë‹¤.

> JWTì€ ì„œëª…(ì¸ì¦)ì´ ëª©ì ì´ë‹¤.
> JWTëŠ” Base64ë¡œ ì•”í˜¸í™”ë¥¼ í•˜ê¸° ë•Œë¬¸ì— ë””ë²„ê±°ë¥¼ ì‚¬ìš©í•´ì„œ ì¸ì½”ë”©ëœ JWTë¥¼ 1ì´ˆë§Œì— ë³µí˜¸í™œ ìˆ˜ ìˆë‹¤.
> ë³µí˜¸í™” í•˜ë©´ ì‚¬ìš©ìì˜ ë°ì´í„°ë¥¼ ë‹´ì€ Payload ë¶€ë¶„ì´ ê·¸ëŒ€ë¡œ ë…¸ì¶œë˜ì–´ ë²„ë¦°ë‹¤. ê·¸ë˜ì„œ í˜ì´ë¡œë“œì—ëŠ” ë¹„ë°€ë²ˆí˜¸ì™€ ê°™ì€ ë¯¼ê°í•œ ì •ë³´ë¥¼ ë„£ì§€ ë§ì•„ì•¼ í•œë‹¤.
> ê·¸ëŸ¼ í† í° ì¸ì¦ ë°©ì‹ì˜ ëª©ì ì€ ë­˜ê¹Œ? **ì •ë³´ ë³´í˜¸ì˜ ëª©ì ì´ ì•„ë‹Œ, ìœ„ì¡° ë°©ì§€ì´ë‹¤.**
> ë°”ë¡œ ìœ„ì—ì„œ ì†Œê°œí–‡ë“¯ì´, ì‹œê·¸ë‹ˆì²˜ì— ì‚¬ìš©ëœ ë¹„ë°€í‚¤ê°€ ë…¸ì¶œë˜ì§€ ì•ŠëŠ”ì´ìƒ ë°ì´í„°ë¥¼ ìœ„ì¡°í•´ë„ ì‹œê·¸ë‹ˆì²˜ ë¶€ë¶„ì—ì„œ ë°”ë¡œ ê±¸ëŸ¬ì§€ê¸° ë•Œë¬¸ì´ë‹¤.

## ğŸ¤— JWTì˜ ì¥ë‹¨ì  ì •ë¦¬
ì¥ì : ì¸ì¦ì„ ìœ„í•œ ë³„ë„ì˜ ì €ì¥ì†Œê°€ í•„ìš”ì—†ë‹¤. ë³„ë„ì˜ I/O ì‘ì—… ì—†ëŠ” ë¹ ë¥¸ ì¸ì¦ ì²˜ë¦¬ í™•ì¥ì„±ì´ ìš°ìˆ˜í•¨
ë‹¨ì : í† í°ì˜ ê¸¸ì´ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ íŠ¹ì • í† í°ì„ ê°•ì œë¡œ ë§Œë£Œì‹œí‚¤ê¸° ì–´ë ¤ì›€

## JWT ì¥ì 
1. Headerì™€ Payloadë¥¼ ê°€ì§€ê³  Signatureë¥¼ ìƒì„±í•˜ë¯€ë¡œ ë°ì´í„° ìœ„ë³€ì¡°ë¥¼ ë§‰ì„ ìˆ˜ ìˆë‹¤.
2. ì¸ì¦ ì •ë³´ì— ëŒ€í•œ ë³„ë„ì˜ ì €ì¥ì†Œê°€ í•„ìš”ì—†ë‹¤.
3. JWTëŠ” í† í°ì— ëŒ€í•œ ê¸°ë³¸ ì •ë³´ì™€ ì „ë‹¬í•  ì •ë³´ ë° í† í°ì´ ê²€ì¦ë¬ìŒì„ ì¦ëª…í•˜ëŠ” ì„œëª… ë“± í•„ìš”í•œ ëª¨ë“  ì •ë³´ë¥¼ ìì²´ì ìœ¼ë¡œ ì§€ë‹ˆê³  ìˆë‹¤.
4. í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ì„¸ì…˜ê³¼ ë‹¤ë¥´ê²Œ, ì„œë²„ëŠ” ë¬´ìƒíƒœ(StateLess)ê°€ ë˜ì–´ ì„œë²„ í™•ì¥ì„±ì´ ìš°ìˆ˜í•´ì§ˆ ìˆ˜ ìˆë‹¤.
5. í† í° ê¸°ë°˜ìœ¼ë¡œ ë‹¤ë¥¸ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì— ì ‘ê·¼ ë° ê¶Œí•œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤.
6. OAuth2.0 ê°™ì€ ê²½ìš° ì†Œì…œ ê³„ì •ì„ ì´ìš©í•˜ì—¬ ë‹¤ë¥¸ ì›¹ì„œë¹„ìŠ¤ì—ì„œë„ ë¡œê·¸ì¸ì„ í•  ìˆ˜ ìˆë‹¤.
7. ëª¨ë°”ì¼ ì–´í”Œë¦¬ì¼€ì´ì…˜ í™˜ê²½ì—ì„œë„ ì˜ ë™ì‘í•œë‹¤. (ëª¨ë°”ì¼ì€ ì„¸ì…˜ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.)


## JWT ë‹¨ì 
1. Self-contained: í† í° ìì²´ì— ì •ë³´ë¥¼ ë‹´ê³  ìˆìœ¼ë¯€ë¡œ ì–‘ë‚ ì˜ ê²€ì´ ë  ìˆ˜ ìˆë‹¤.
2. í† í° ê¸¸ì´: í† í°ì˜ Payloaddp 3ì¢…ë¥˜ì˜ í´ë ˆì„ì„ ì €ì¥í•˜ê¸° ë•Œë¬¸ì—, ì •ë³´ê°€ ë§ì•„ì§ˆìˆ˜ë¡ í† í°ì˜ ê¸¸ì´ê°€ ëŠ˜ì–´ë‚˜ ë„¤íŠ¸ì›Œí¬ì— ë¶€í•˜ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤.
3. Payload ì¸ì½”ë”©: payload ìì²´ëŠ” ì•”í˜¸í™” ëœ ê²ƒì´ ì•„ë‹ˆë¼ BASE64ë¡œ ì¸ì½”ë”© ëœ ê²ƒì´ê¸° ë•Œë¬¸ì—, ì¤‘ê°„ì— Payloadë¥¼ íƒˆì·¨í•˜ì—¬ ë””ì½”ë”©í•˜ë©´ ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, payloadì— ì¤‘ìš” ë°ì´í„°ë¥¼ ë„£ì§€ ì•Šì•„ì•¼ í•œë‹¤.
4. Store Token: stateless íŠ¹ì§•ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—, í† í°ì€ í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ê´€ë¦¬í•˜ê³  ì €ì¥í•œë‹¤. ë•Œë¬¸ì— ì½”íŠ¼ ìì²´ë¥¼ íƒˆì·¨ë‹¹í•˜ë©´ ëŒ€ì²´í•˜ê¸°ê°€ ì–´ë µê²Œ ëœë‹¤.

## ğŸ” JWTì˜ Access Token / Refresh Token
ì´ëŸ¬í•œ ë‹¨ì  ë•Œë¬¸ì—, ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šê³  Access Token, Refresh Token ìœ¼ë¡œ ì´ì¤‘ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì¸ì¦ì„ í•˜ëŠ” ë°©ì‹ì„ ì·¨í•œë‹¤.

- **Access Token** : **í´ë¼ì´ì–¸íŠ¸**ê°€ ê°–ê³ ìˆëŠ” ì‹¤ì œë¡œ ìœ ì €ì˜ ì •ë³´ê°€ ë‹´ê¸´ í† í°ìœ¼ë¡œ, í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì´ ì˜¤ë©´ ì„œë²„ì—ì„œ í•´ë‹¹ í† í°ì— ìˆëŠ” ì •ë³´ë¥¼ í™œìš©í•˜ì—¬ ì‚¬ìš©ì ì •ë³´ì— ë§ê²Œ ì‘ë‹µì„ ì§„í–‰
- **Refresh Token**: ìƒˆë¡œìš´ Access Tokenì„ ë°œê¸‰í•´ì£¼ê¸° ìœ„í•´ ì‚¬ìš©í•˜ëŠ” í† í°ìœ¼ë¡œ ì§§ì€ ìˆ˜ëª…ì„ ê°€ì§€ëŠ” Access Tokenì—ê²Œ ìƒˆë¡œìš´ í† í°ì„ ë°œê¸‰í•´ì£¼ê¸° ìœ„í•´ ì‚¬ìš©. í•´ë‹¹ í† í°ì€ ë³´í†µ **ë°ì´í„°ë² ì´ìŠ¤**ì— ìœ ì € ì •ë³´ì™€ ê°™ì´ ê¸°ë¡.
# ğŸŒ OAuth2.0
![OAuth2.0](https://cdn.prod.website-files.com/659196fa73ab4e0a962e3994/65f0b79aa570eaf0ca620b93_U2F%20(4).jpg)
## **OAuth ë€?**
êµ¬ê¸€, í˜ì´ìŠ¤ë¶, X(ì „ íŠ¸ìœ„í„°)ì™€ ê°™ì€ ë‹¤ì–‘í•œ í”Œë«í¼ì„ íŠ¹ì •í•œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ì ‘ê·¼í•˜ê¸° ìœ„í•´ ì œ 3ì í´ë¼ì´ì–¸íŠ¸ê°€ ì‚¬ìš©ìì˜ ì ‘ê·¼ ê¶Œí•œì„ ìœ„ì„ì„ ë°›ì„ ìˆ˜ ìˆëŠ” í‘œì¤€ í”„ë¡œí† ì½œì´ë‹¤. 

## ğŸ§© êµ¬ì„± ìš”ì†Œ

### Resource Owner
ìš°ë¦¬ì˜ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ì„œ, êµ¬ê¸€, í˜ì´ìŠ¤ë¶ ë“±ì˜ í”Œë«í¼ì—ì„œ ë¦¬ì†ŒìŠ¤(ê°œì¸ì •ë³´)ë¥¼ ì†Œìœ í•˜ê³  ìˆëŠ” ì‚¬ìš©ìì´ë‹¤. 
'Resource'ëŠ” ê°œì¸ì •ë³´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.
### Client
Resource Serverì˜ ìì›ì„ ì´ìš©í•˜ê³ ì í•˜ëŠ” ì„œë¹„ìŠ¤. ìì‚¬ ë˜ëŠ” ê°œì¸ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì´ë‹¤.
### Authorization Server
ì‚¬ìš©ì(Resource Owner)ë¥¼ ì¸ì¦í•˜ê³ , ClientëŠ” ì´ ì„œë²„ì— Authorization Codeë¥¼ ë„˜ê²¨ ì•¡ì„¸ìŠ¤ í† í°ì„ ë°œê¸‰ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.
ì‚¬ìš©ì(Resource Owner)ëŠ” ì´ ì„œë²„ë¡œ ID, PWë¥¼ ë„˜ê¸´í›„ Authorization Codeë¥¼ ë°œê¸‰ ë°›ì„ ìˆ˜ ìˆë‹¤.
### Resource Server
**Resource Server**ëŠ” êµ¬ê¸€, í˜ì´ìŠ¤ë¶, íŠ¸ìœ„í„°ì™€ ê°™ì´ ë¦¬ì†ŒìŠ¤ë¥¼ ê°€ì§€ê³  ìˆëŠ” ì„œë²„ë¥¼ ë§í•œë‹¤.
ClientëŠ” Tokenì„ ì´ ì„œë²„ë¡œ ë„˜ê²¨ ê°œì¸ì •ë³´ë¥¼ ì‘ë‹µ ë°›ì„ ìˆ˜ ìˆë‹¤.
### Access Token
ìì›ì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ Resource Ownerê°€ ì¸ê°€í•˜ì˜€ìŒì„ ë‚˜íƒ€ë‚´ëŠ” ìê²©ì¦ëª…
### Refresh Token
ClienëŠ” Authorization Serverë¡œ ë¶€í„° access token(ì§§ì€ ë§Œë£Œê¸°ê°„) refresh token(ê¸´ ë§Œë£Œê¸°ê°„)ì„ í•¨ê»˜ ë¶€ì—¬ë°›ëŠ”ë‹¤.
access tokenì€ ë³´ì•ˆìƒ ë§Œë£Œê¸°ê°„ì´ ì§§ê¸´ ë•Œë¬¸ì— ê¸°ê°„ì´ ì§€ë‚˜ë©´ ì‚¬ìš©ìëŠ” ë‹¤ì‹œ ë¡œê·¸ì¸ì„ í•´ì¤˜ì•¼ í•œë‹¤. ê·¸ëŸ¬ë¯€ë¡œ ë§Œë£Œê¸°ê°„ì´ ì§€ë‚˜ë©´ refresh tokenì„ í†µí•´ access tokenì„ ë‹¤ì‹œ ì¬ë°œê¸‰ ë°›ëŠ”ë‹¤.

## Googleë¡œ ê°„ë‹¨íˆ ì•Œì•„ë³´ê¸°
Google API Consoleì— ë“¤ì–´ê°€ì„œ callbackURL ë° êµ¬ê¸€ë¡œ ìš”ì²­ ì •ë³´(scope) ì„¤ì •í•´ì•¼ ë˜ëŠ”ë° êµ¬ê¸€ ê°™ì€ ê²½ìš°ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Scopeì´ ì •í•´ì ¸ ìˆë‹¤.
ë„¤ì´ë²„ ë˜ëŠ” ì¹´ì¹´ì˜¤ ê°™ì€ OAuthì— ê¸°ë³¸ì ìœ¼ë¡œ ë“±ë¡ë˜ì–´ ìˆì§€ ì•Šì€ ê²ƒë“¤ì€ ë”°ë¡œ scopeì„ ì •í•´ì¤˜ì•¼ í•œë‹¤.

**ë„¤ì´ë²„ scope**
![ë„¤ì´ë²„ Scope](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FrVkh8%2Fbtr5ZkdIv30%2FXrbsmi5RB2vkKin15yXaA0%2Fimg.png)
<cite>https://juheeexx.tistory.com/10</cite>

**êµ¬ê¸€ scope**(Spring í™˜ê²½)
```java
public enum CommonOAuth2Provider {  
    GOOGLE {  
        public ClientRegistration.Builder getBuilder(String registrationId) {  
            ClientRegistration.Builder builder = this.getBuilder(registrationId, ClientAuthenticationMethod.CLIENT_SECRET_BASIC, "{baseUrl}/{action}/oauth2/code/{registrationId}");  
            builder.scope(new String[]{"openid", "profile", "email"});  
            builder.authorizationUri("https://accounts.google.com/o/oauth2/v2/auth");  
            builder.tokenUri("https://www.googleapis.com/oauth2/v4/token");  
            builder.jwkSetUri("https://www.googleapis.com/oauth2/v3/certs");  
            builder.issuerUri("https://accounts.google.com");  
            builder.userInfoUri("https://www.googleapis.com/oauth2/v3/userinfo");  
            builder.userNameAttributeName("sub");  
            builder.clientName("Google");  
            return builder;  
        }  
    },
    // ....
}
```
Springí™˜ê²½ì—ì„œ CommonOAuth2Providerì„ ë³´ë©´ `builder.scope(new String[]{"openid", "profile", "email"});`ì„ ë³´ë©´ scopeê°€ `openid`, `profile`, `email`ì´ ì •í•´ì ¸ìˆë‹¤.
<p align="center">
	<img src="https://theonetechnologies.com/Posts/files/create-oauth-client-id_637812903648113814.png">
	<cite>https://theonetechnologies.com/blog/post/how-to-get-google-app-client-id-and-client-secret</cite>
</p>
4ë²ˆì„ ë³´ë©´ **callbackURL**ì„ ì„¤ì •í•´ì¤€ë‹¤.
ë“±ë¡ì´ ì™„ë£Œë˜ë©´ í´ë¼ì´ì–¸íŠ¸ ì•„ì´ë””ì™€ ë¹„ë²ˆ ì •ë³´ê°€ ë‚˜ì˜¨ë‹¤.
<p align="center"> 
	<img src="https://theonetechnologies.com/Posts/files/get-your-client-id-client-secret_637812903648577584.png"> 
	<cite>https://theonetechnologies.com/blog/post/how-to-get-google-app-client-id-and-client-secret</cite>
</p>
Clien ID, Clien Secret, Authorized redirect URLsëŠ” ì„œë¹„ìŠ¤ë¥¼ ë“±ë¡í•˜ë©´ ë°›ê²Œë˜ëŠ” í•„ìˆ˜ ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

```text
Createp app
-------------------------------------
Clien ID      1
Clien Secret  2

Authorized redirect URLs https://clien/callback
```
**Clien ID**
- ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹ë³„í•˜ëŠ” ì‹ë³„ì IDë¥¼ ì˜ë¯¸
- Resource Server ì…ì¥ì—ì„œëŠ” ì–´ë–¤ ì„œë¹„ìŠ¤ì—ê²Œ ì œê³µí•  ê²ƒ ì¸ì§€ êµ¬ë¶„í•˜ëŠ” IDë¥¼ ì˜ë¯¸í•œë‹¤.

**Clien Secret**
- IDì˜ íŒ¨ìŠ¤ì›Œë“œë¼ê³  í•˜ë©´ í¸í•˜ë‹¤.
- Client IDì— ëŒ€í•œ ë¹„ë°€ë²ˆí˜¸ IDê°™ì€ ê²½ìš°ëŠ” ì™¸ë¶€ì— ë…¸ì¶œë˜ë„ ìƒê´€ì—†ì§€ë§Œ Secretê°™ì€ ê²½ìš°ëŠ” ì™¸ë¶€ì— ì ˆëŒ€ ë…¸ì¶œë˜ë©´ ì•ˆëœë‹¤.

**Authorized redirect URLs**
- Resource Serverë§Œ ê°–ëŠ” ì •ë³´ë¡œ,  clientì— ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê³¼ì •ì—ì„œ ë‚˜ì¤‘ì— Authorized codeë¥¼ ì „ë‹¬í•˜ëŠ” í†µë¡œë‹¤.
- ë‚˜ì¤‘ì— client <-> Resource Server ìœ íš¨ì„± ê²€ì‚¬ì—ì„œ ì´ redirect URIsë„ ì²´í¬ë˜ë©° í•´ë‹¹ì£¼ì†Œê°€ ì•„ë‹ ê²½ìš° Resource ServerëŠ” í•´ë‹¹ clientê°€ ì•„ë‹ˆë¼ê³  íŒë‹¨í•œë‹¤.
- ì°¸ê³ ë¡œ redirect URLì€ httpsì´ì–´ì•¼ í•œë‹¤. (localhost ê°™ì€ ê²½ìš°ëŠ” ì˜ˆì™¸)

**scope**
- Resource Serverì—ì„œ ì‚¬ì „ì— ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ ë¯¸ë¦¬ ì •ì˜í•œ ê¸°ëŠ¥

## Resource owner ìŠ¹ì¸ ê³¼ì •
![ë¡œê·¸ì¸ ê³¼ì •](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FHGu3i%2Fbtq2kqQrO28%2FytMUrO1opx8UJyCKOfROBK%2Fimg.png)
`1.` ì‚¬ìš©ì(Resource owner)ëŠ” ì„œë¹„ìŠ¤(client)ë¥¼ ì´ìš©í•˜ê¸° ìœ„í•´ ë¡œê·¸ì¸ í˜ì´ì§€ì— ì ‘ê·¼í•œë‹¤.
`2.` ê·¸ëŸ¼ ì„œë¹„ìŠ¤(client)ëŠ” ì‚¬ìš©ì(Resource Owner)ì—ê²Œ ë¡œê·¸ì¸ í˜ì´ì§€ë¥¼ ì œê³µí•˜ê²Œ ëœë‹¤.
<p align="center">
	<img src="https://velog.velcdn.com/images/psi1908/post/e2b7b5a4-19d1-4bcd-9318-3b73e013f125/image.jpg">
</p>

`3.` ì‚¬ìš©ìê°€ ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, í•´ë‹¹(Google, Meta) ì„œë²„ë¡œ íŠ¹ì • url ë³´ë‚´ì§€ê²Œ ëœë‹¤.
   ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdggOEd%2Fbtrm2oE3fnt%2FS6mh4UBxj5y8zK7rdOszsk%2Fimg.png)
>ë“±ë¡ì„ í•˜ê²Œ ë˜ë©´ Client(ë‚´ ì„œë¹„ìŠ¤)ì™€ Resource Server(Google ì„œë²„)ì— Client id, Client Secretì€ ë‘˜ì´ ì„œë¡œ ì•Œê³  ìˆëŠ” ìƒí™©

   íŠ¹ì • url ê°™ì€ ê²½ìš°ëŠ” ë‹¤ìŒê³¼ ë¹„ìŠ·í•˜ê²Œ ìƒê²¼ë‹¤.
```BASH
https://resource.server/?client_id=1&scope=B,C&redirect=https://client/callback
```
ìœ„ì˜ ì½”ë“œê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ì.
```
https://resource.server/? # 1
client_id=1 # 2
&scope=B,C # 3
&redirect=https://client/callback # 4
```
- ë¦¬ì†ŒìŠ¤ ì„œë²„(Google, Naver, Kakao..)
- ì–´ë–¤ clientì¸ì§€ë¥¼ idë¥¼ í†µí•´ Resouce Ownerì—ê²Œ ì•Œë ¤ì£¼ëŠ” ë¶€ë¶„
- Resource Ownerê°€ ì‚¬ìš©í•˜ë ¤ëŠ” ê¸°ëŠ¥, ë‹¤ë¥´ê²Œ ë§í•˜ë©´ clientê°€ ìì‹  ì„œë¹„ìŠ¤ì—ì„œ ì‚¬ìš©í•˜ë ¤ëŠ” Resource Server ê¸°ëŠ¥ì„ í‘œí˜„í•œë‹¤.
- ê°œë°œì í™ˆí˜ì´ì§€ì— ì„œë¹„ìŠ¤ ê°œë°œì ì…ë ¥í•œ ì‘ë‹µ ì½œë°±
í–¥í›„ **redirect_uri ê²½ë¡œë¥¼ í†µí•´ì„œ Resource ServerëŠ” clientì—ê²Œ ì„ì‹œë¹„ë°€ë²ˆí˜¸ì¸ Authorization codeë¥¼ ì œê³µ**í•œë‹¤.

`4.` í´ë¼ì´ì–¸íŠ¸ë¡œë¶€í„° ë³´ë‚¸ ì •ë³´ì™€, ë¦¬ì†ŒìŠ¤ ë¡œê·¸ì¸ ì„œë²„ì— ë“±ë¡ëœ ì„œë¹„ìŠ¤ ì •ë³´ë¥¼ ë¹„êµí•œë‹¤.![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbPB3VN%2FbtrmY4AwK5T%2FKsqtnPQhFKHZeNJVTtvJ70%2Fimg.png)
`4.1 `í™•ì¸ ì™„ë£Œë˜ë©´, Resource Serverë¡œ ë¶€í„° ì „ìš© ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ì—¬ ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤€ë‹¤.![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcpjfWD%2Fbtrm55Y808m%2FrjXpMObkIJGs8SK6xby7wK%2Fimg.png)
`5.` ID/PWë¥¼ ì ì–´ì„œ ë¡œê·¸ì¸ì„ í•˜ê²Œë˜ë©´, clientê°€ ì‚¬ìš©í•˜ë ¤ëŠ” ê¸°ëŠ¥(scope)ì— ëŒ€í•´ Resource Ownerì˜ ë™ì˜(ìŠ¹ì¸)ì„ ìš”ì²­í•œë‹¤. ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbMlJcU%2FbtrmY5faq0w%2FIQKSYMkTAtI1ZSOJ69wXPk%2Fimg.png)
   ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FJKj0t%2FbtrmXVKLK1H%2Fu561A1jkFE76KT27lbDhuK%2Fimg.png)

`5.1` Resource Ownerê°€ Allow ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ Resource Ownerê°€ ê¶Œí•œì„ ìœ„ì„í–ˆë‹¤ëŠ” ìŠ¹ì¸ì´ Resource Server ì— ì „ë‹¬ëœë‹¤.Â 
   ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FnXxv2%2FbtrmYFOzP0Q%2FNK9Znt2W0oGyQhi9Y41Z20%2Fimg.png)
   
   ë¦¬ì†ŒìŠ¤ ì„œë²„ê°€ ê°€ì§€ëŠ” ì •ë³´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.
   - Client id: Resource Ownerì™€ ì—°ê²°ëœ clientê°€ ëˆ„êµ°ì§€
   - Client Secret: Resource Ownerì™€ ì—°ê²°ëœ clientì˜ ë¹„ë°€ë²ˆí˜¸
   - Redirect URL: clientì™€ í†µì‹ í•  í†µë¡œ
   - user id: clientì™€ ì—°ê²°ëœ Resource Ownerì˜ id
   - scope: clientê°€ Resource Owner ëŒ€ì‹ ì— ì‚¬ìš©í•  ê¸°ëŠ¥ë“¤
`6.` í•˜ì§€ë§Œ, ì´ë¯¸ Ownerê°€ Clientì—ê²Œ ê¶Œí•œ ìŠ¹ì¸ì„ í–ˆë”ë¼ë„ ì•„ì§ Serverê°€ í—ˆë½í•˜ì§€ ì•Šì•˜ë‹¤. ë”°ë¼ì„œ, Resource Server ë„ Clientì—ê²Œ ê¶Œí•œ ìŠ¹ì¸ì„ í•˜ê¸°ìœ„í•´ Authorization codeë¥¼ Redirect URLì„ í†µí•´ ì‚¬ìš©ìì—ê²Œ ì‘ë‹µí•˜ê³ 
`7.` ë‹¤ì‹œ ì‚¬ìš©ìëŠ” ê·¸ëŒ€ë¡œ Clientì—ê²Œ ë‹¤ì‹œ ë³´ë‚¸ë‹¤.![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbpgSKW%2Fbtrm82ukE4o%2FgZI1nvkaGFKWdutuGV5x3k%2Fimg.png)
   
ì´ë¥¼ í†µí•´, clientëŠ” Resource Serverê°€ ë³´ë‚¸ Authorization code, "code=3"ë¥¼ Resource Ownerí†µí•´ ë°›ëŠ”ë‹¤.
`8.` ì´ì œ Clientê°€ Resource Serverì—ê²Œ ì§ì ‘ url(í´ë¼ì´ì–¸ë“œ ì•„ì´ë””, ë¹„ë²ˆ, ì¸ì¦ì½”ë“œ ...ë“±)ì„ ë³´ë‚¸ë‹¤. ![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbXz5c6%2Fbtrm2oLRKIE%2F616LjfGfUDPNcKrzTK4ep0%2Fimg.png)

`9. `ê·¸ëŸ¼ Resource ServerëŠ” Clientê°€ ì „ë‹¬í•œ ì •ë³´ë“¤ì„ ë¹„êµí•´ì„œ ì¼ì¹˜í•œë‹¤ë©´,Â Access Tokenì„ ë°œê¸‰í•œë‹¤. ê·¸ë¦¬ê³  ì´ì œ í•„ìš”ì—†ì–´ì§„ **Authorization codeëŠ” ì§€ìš´ë‹¤.**
`10.` ê·¸ë ‡ê²Œ í† í°ì„ ë°›ì€ ClientëŠ” ì‚¬ìš©ìì—ê²Œ ìµœì¢…ì ìœ¼ë¡œ ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ì—ˆë‹¤ê³  ì‘ë‹µí•œë‹¤.![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FGUsu2%2Fbtrm5zsB4sG%2FkNJob33QomLyGEPdZIzDc1%2Fimg.png)
`11 ~ 14.` ì´ì œ clientëŠ” Resource serverì˜ apië¥¼ ìš”ì²­í•´ Resource Ownerì˜ ID í˜¹ì€ í”„ë¡œí•„ ì •ë³´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.

`15.` Access Tokenì´ ê¸°ê°„ì´ ë§Œë£Œë˜ì–´ 401ì—ëŸ¬ê°€ ë‚˜ë©´, Refresh Tokenì„ í†µí•´Â  Access Tokenì„ ì¬ë°œê¸‰ í•œë‹¤.



ì°¸ê³ 
https://dev-coco.tistory.com/174</br>
https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-JWTjson-web-token-%EB%9E%80-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC</br>
https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-OAuth-20-%EA%B0%9C%EB%85%90-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC</br>
https://hudi.blog/oauth-2.0/ </br>
https://www.youtube.com/watch?v=UH5XnjkBqKE&list=PLuHgQVnccGMA4guyznDlykFJh28_R08Q-&index=4</br>
https://hwannny.tistory.com/92